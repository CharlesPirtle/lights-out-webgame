<!doctype html>
<html>
  <head>
    <title>Lights Out</title>
    <style>
      body {
        user-select: none;
        background-color: #ffff66;
        text-align:center;
      }

      .square {
        width: 100px;
        height: 100px;
        margin: 20px;
        display: inline-block;
        border-radius: 200px;
        vertical-align: middle;
      }

      .ghost{
        text-align: center;
      }

      h1{
        font-family: sans-serif;
        background-color: white;
        display:inline-block;
        padding: 5px 5px 5px 5px;
        border-radius: 10px;
        border-style: solid;
      }

      .cghost{
        text-align: center;
        background-color: white;
        display: inline-block;
        padding: 10px 10px 10px 10px;
        border-style: solid;
        border-radius: 10px;
        font-size: 45px;
      }

        .counter-wrapper{
          text-align: center;
        }

    </style>
    <script>

    const COLOR_1 = 'black';
    const COLOR_2 = 'white';


    function setup() {
      const squares = document.querySelectorAll(".square");
      for (let i=0; i< squares.length; i++) {
        squares[i].style.backgroundColor = COLOR_1;
      }
      ranboard();
    }


    function changeSquareColor(x, y) {
      let el = document.getElementById(x + "-" + y);
      if (el === null) {
        return;
      }
      const currentColor = el.style.backgroundColor;
      if (currentColor === COLOR_2) {
        el.style.backgroundColor = COLOR_1;
      }
      else {
        el.style.backgroundColor = COLOR_2;
      }
    }


    function checkForWinner() {
      const squares = document.querySelectorAll(".square");
      console.log(squares);
      let numOff = 0;
      for (let i=0; i< squares.length; i++){
        if (squares[i].style.backgroundColor === COLOR_1) {
          console.log("IF")
          numOff++;
        }
      }
      console.log(numOff);
      if (numOff === 25) {
        window.setTimeout(function () {
          window.alert("You the Best Homie.");
            clearInterval(g);
        }, 0);
      }
    }


    g=null;
    function clickSquare(ev) {
      const string_xy = ev.target.id.split("-");
      const x = parseInt(string_xy[0]);
      const y = parseInt(string_xy[1]);
      
      changeSquareColor(x, y);
      changeSquareColor(x+1, y);
      changeSquareColor(x-1, y);
      changeSquareColor(x, y+1);
      changeSquareColor(x, y-1);

      checkForWinner();
      if (g===null){
        counter();
      }
    }


    function counter(){
      let s = document.getElementById("seconds").innerText;
      let m =  document.getElementById("minutes").innerText;
      window.g=setInterval(function (){
        document.getElementById("seconds").innerText = s.toString().padStart(2,'0');
        document.getElementById("minutes").innerText = m.toString().padStart(2,'0');
        if (s===59){
          m++;
          s=-1;
        }
        s++;
      }, 1000);
    }


    function ranboard(){
      const squares = document.querySelectorAll(".square");
      for (let i=0; i< squares.length; i++) {
        select = Math.random() * 5;
        select_t=Math.floor(select);
        if (select_t != 0){
          const string_xy = squares[i].id.split("-");
          const x = parseInt(string_xy[0]);
          const y = parseInt(string_xy[1]);
          changeSquareColor(x, y);
          changeSquareColor(x+1, y);
          changeSquareColor(x-1, y);
          changeSquareColor(x, y+1);
          changeSquareColor(x, y-1);
        }
      }
    }


        </script>
    </head>
    <body onload="setup();">
      <h1>Lights Out</h1>
      <div class="ghost">

        <div id="0-0" class="square" onclick="clickSquare(event);"></div>
        <div id="1-0" class="square" onclick="clickSquare(event);"></div>
        <div id="2-0" class="square" onclick="clickSquare(event);"></div>
        <div id="3-0" class="square" onclick="clickSquare(event);"></div>
        <div id="4-0" class="square" onclick="clickSquare(event);"></div>
        <br>
        <div id="0-1" class="square" onclick="clickSquare(event);"></div>
        <div id="1-1" class="square" onclick="clickSquare(event);"></div>
        <div id="2-1" class="square" onclick="clickSquare(event);"></div>
        <div id="3-1" class="square" onclick="clickSquare(event);"></div>
        <div id="4-1" class="square" onclick="clickSquare(event);"></div>
        <br>
        <div id="0-2" class="square" onclick="clickSquare(event);"></div>
        <div id="1-2" class="square" onclick="clickSquare(event);"></div>
        <div id="2-2" class="square" onclick="clickSquare(event);"></div>
        <div id="3-2" class="square" onclick="clickSquare(event);"></div>
        <div id="4-2" class="square" onclick="clickSquare(event);"></div>
        <br>
        <div id="0-3" class="square" onclick="clickSquare(event);"></div>
        <div id="1-3" class="square" onclick="clickSquare(event);"></div>
        <div id="2-3" class="square" onclick="clickSquare(event);"></div>
        <div id="3-3" class="square" onclick="clickSquare(event);"></div>
        <div id="4-3" class="square" onclick="clickSquare(event);"></div>
        <br>
        <div id="0-4" class="square" onclick="clickSquare(event);"></div>
        <div id="1-4" class="square" onclick="clickSquare(event);"></div>
        <div id="2-4" class="square" onclick="clickSquare(event);"></div>
        <div id="3-4" class="square" onclick="clickSquare(event);"></div>
        <div id="4-4" class="square" onclick="clickSquare(event);"></div>
        <br>
    </div>




    <div class="counter-wrapper">
        <div class="cghost">
        <span class='clock-font' id="minutes">00</span>
        <span class='clock-font'>:</span>
        <span class='clock-font' id="seconds">00</span>
        </div>
    </div>


</body></html>
